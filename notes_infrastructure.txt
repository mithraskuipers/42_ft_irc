# **************************************************************************** #
#                                                                              #
#                                                         ::::::::             #
#    notes_infrastructure.txt                           :+:    :+:             #
#                                                      +:+                     #
#    By: mikuiper <mikuiper@student.codam.nl>         +#+                      #
#                                                    +#+                       #
#    Created: 2023/10/25 08:01:37 by mikuiper      #+#    #+#                  #
#    Updated: 2023/10/25 10:08:44 by mikuiper      ########   odam.nl          #
#                                                                              #
# **************************************************************************** #

+ [Server]
	+ this->initServer()
		- Initializes the server
			+ socket()
				- Creates a server socket.
			+ setsockopt()
				- Sets the socket options (reusing address, buffering options).
			+ fcntl()
				- Managing fd.
			+ bind()
				- Associate a socket with a IP address and port.
			+ listen()
				- Tells socket to accept incoming connections.
				- Second param specifies max number of queued connections.
	+ this->startServer()
		- Starts server. Responsible to handling incoming client connections and managing data transfer.
			+ poll()
				- Monitors multiple fd for read readiness. Waits until an event occurs on any of the specified file descriptors. (poll() is bit similar to select()).
			+ accept()
				- System call to accept new incoming connection from a client. Creates new socket descriptor for that specific client.
				+ handleNewConnection()
						- Wrapper for creating a new client using client socket and username.
						- Wrapper for sending out welcome message.
						- Wrapper for sending out MOTD message.
							+ addClientSocket()
								- Create new client object using Client constructor + client socket + username.
								- It creates this username randomly. Performs checks to ensure unique username.
									+ generateRandomCode()
										- Creates random 4 number string suffix to add to initial "Guest" username.
									+ isNicknameInUse()
										- Checks if current randomly created nickname (e.g. Guest1717) is already in use.
							+ sendMotdMessage()
								- Sends MOTD message to specific client on basis of its socket and username.
					+ checkIfDataReceivedFromClient()
						- Important function for checking if client has disconnect server (= bytes).
						- Important function for checking if client has sent input.
						+ recv()
							- To receive data from a socket.
							- Here it is used to check if client has disconnected (i.e. recv returns 0 bytes).
						+ processRawClientData()
							- This function processes the bytes received by the server from the client.
							- It splits received input string into parts vector named 'command'. TODO make this nicer and more failure proof?
							- Performans literal direct comparisons between command[0] and received command from IRC client.
							- Important: This is not the user client input (e.g. /nick), but what the IRC client sends to the server (e.g. NICK) on the basis of what the user had sent (e.g. /nick).
							- Tons of "handleXxxCommand" functions to perform the command.
								+ handleNickCommand()
									- Command for changing current client's nickname.
									- Uses client object and command[1]
									- Cleans up the command[1]
									- Checks if new nickname is not empty and if it is different from current nickname
										+ sendToClient()
										+ isNicknameInUse()
										+ isUserInChannel(). Channel member function.
										+ broadcastMessage(). Channel member function.
								+ handleJoinCommand()
									- Makes the client join a channel.
									- If the channel does not exist, it creates the channel first and then connects to the channel.
										+ XXX()
										+ XXX()
										+ XXX()
								+ XXX
									- XXX
									- XXX
										+ XXX()
										+ XXX()
										+ XXX()
								+ ???()
									-
+ [X]
	+	+	X
+ [X]
	+	+	X
+ [X]
	+	+	X
+ [X]
	+	+	X



[GENERAL]

+ send()
	- To send data over a connected socket. Used by both server and client to send data to eachother.
+
	-
+
	-
+
	-
